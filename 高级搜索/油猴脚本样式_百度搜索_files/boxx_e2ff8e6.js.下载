!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("@baidu/boxx/dist/boxx.umd",[],n):(e=e||self,e.boxx=n())}(this,function(){"use strict";function e(e){vn=e,bn.forEach(function(e){vn.apply(void 0,e)}),bn=[]}function n(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return vn?void vn.apply(void 0,e):void bn.push(e)}function r(e,n){function r(e){if(!(+e>=0))throw new Error("传递了非法版本号:: "+e);return+e}if(e===n)return 0;
for(var t=(""+e).split(".").map(r),a=(""+n).split(".").map(r),o=0,i=Math.max(t.length,a.length);i>o;o++){if(t[o]>a[o]||t[o]&&!a[o]&&t[o]>0)return 1;if(t[o]<a[o]||a[o]&&!t[o]&&a[o]>0)return-1}return 0}function t(e){var n=e.UA,r=e.isIOS,t=e.isAndroid,a=0;if(t){var o=n.match(/(android);?\s+([\d.]+)?/);return o&&o[2]}if(r){var i=n.match(/(ipad|iphone|ipod).*os\s([\d_]+)/);return i&&i[2].replace(/_/g,".")}return a}function a(e){var n=e.boxType,t=e.realBoxVersion,a=e.isIOS,o=mn[n]||{},i=Object.keys(o),s=i.length;
if(0===s)return"";i.sort(r).reverse();for(var c=0;c<i.length;c++){var u=i[c];if(r(t,u)>=0)return"string"!=typeof o[u]?a?o[u].ios:o[u].android:o[u]}return""}function o(e){var n=e.isBdApp,r=e.UA,t=e.appProtoName;if(n){var a=new RegExp(t+"/([\\d+.]+)").exec(r);if(a&&a[1])return a[1]}var o=/baiduboxapp\/([\d+.]+)/.exec(r);if(o&&o[1])return o[1];if(hn.baiduboxapp_version)return hn.baiduboxapp_version;var i=/([\d+.]+)_(?:diordna|enohpi)_/.exec(r);return i&&i[1]&&i[1].split(".").reverse().join(".")||0}function i(e){var n=e.isBdApp,r=e.isLiteBox,t=e.realBoxVersion;
return n||r?a(e):t}function s(e){var n=e&&/iphone|ipad|ipod|ios/.test(e),r=e&&e.indexOf("android")>0,a=r?"android":n?"ios":"unknown",s={UA:e,isIOS:n,isAndroid:r},c=t(s),u=/ baiduboxapp\//i.test(e)||/ bdapp\//i.test(e),f=/ bdapp\//i.test(e),l=/ bdapp\/\d+[.\d+]*\s\((\w+)[;]?\s?(\w+)?\)/g,d=l.exec(e),p=wn&&window&&window._na&&window._na.getSchemeHeader,g=p&&window._na.isSupportSwan&&window._na.isSupportSwan(),m=p&&window._na.isSupportSearchSDK&&window._na.isSupportSearchSDK(),h=!m&&g,v=g||m?window._na.getSchemeHeader():d?d[2]||d[1]:"baiduboxapp",b=/ baiduboxapp\//i.test(e)&&!/ (lite|info|pro|mission) baiduboxapp/.test(e)&&!f,y=n&&/ info baiduboxapp\//i.test(e)||r&&/ lite baiduboxapp\//i.test(e),w=/ mission baiduboxapp\//i.test(e),A=b?"main":w?"mission":y?"lite":v||"unknown",k="main",O=/imagesearch[\s\S]+main/i.test(e)?"imageseach":/light/i.test(e)?"light":"search";
Object.assign(s,{isBdApp:f,boxType:A,appProtoName:v});var S=o(s);Object.assign(s,{realBoxVersion:S,isLiteBox:y});var x=i(s);return{isIOS:n,isAndroid:r,OS:a,OSVersion:c,isBoxSeries:u,isBdApp:f,isSupportSwanInBrowser:g,isUseBrowserDesc:h,appProtoName:v,isMainBox:b,isLiteBox:y,isMissionBox:w,boxType:A,adaptBoxType:k,boxBrowserType:O,realBoxVersion:S,boxVersion:x}}function c(e){try{e.boxType=Tn,e.boxVersion=Dn}catch(n){}return e}function u(e,t){void 0===t&&(t={isApp:Bn,isBdBox:In,isLiteApp:En,appType:Tn,realAppVersion:Dn});
var a=t.isApp,o=t.isBdBox,i=t.isLiteApp,s=t.appType,c=t.realAppVersion;n(e?a&&r(c,"12.16")<0||o||i?s+c+"使用兜底描述表，符合预期":s+c+"使用兜底描述表，！！！不符合预期，请加抽样验证效果！！！":a?r(c,"12.16")>0?s+c+"使用端描述表，符合预期":s+c+"使用端描述表，！！！不符合预期，请去掉抽样使用兜底描述表验证效果！！！":"矩阵产品"+s+c+"线上无法命中联动实验，不会使用端描述表，！！！不需要加抽样验证，请去掉抽样使用兜底描述表验证效果！！！")}function f(){var e={};return{on:function(n,r){e.hasOwnProperty(n)?-1===e[n].indexOf(r)&&e[n].push(r):e[n]=[r]},off:function(n,r){var t=e[n]||[],a=t.indexOf(r);a>-1&&e[n].splice(a,1)},once:function(e,n){var r=this,t=function(){for(var a=[],o=arguments.length;o--;)a[o]=arguments[o];
r.off(e,t),n.apply.apply(n,[r].concat(a))};this.on(e,t)},emit:function(n){for(var r=[],t=arguments.length-1;t-->0;)r[t]=arguments[t+1];var a=n.split(":"),o=a.length;if(2!==o||"*"!==a[1]){if(o>1){var i=a[0]+":*";l.apply(void 0,[e,i,n].concat(r))}l.apply(void 0,[e,n].concat(r))}}}}function l(e,n){for(var r=[],t=arguments.length-2;t-->0;)r[t]=arguments[t+2];e.hasOwnProperty(n)&&e[n].forEach(function(e){e.apply(void 0,r)})}function d(){for(;Mn.length>0;){var e=Mn.shift();Vn.emit(e.name,e.error)}}function p(e,n){return n={exports:{}},e(n,n.exports),n.exports
}function g(e,n){return 1===e.length?[]:e.map(function(e){for(var r in n)n.hasOwnProperty(r)&&(e[r]=e[r]||n[r]);return e})}function m(e){for(var n=e.length-1;n>=0;n--){var r=Object.keys(e[n]);1===r.length&&"name"===r[0]&&e.splice(n,1)}}function h(e){if("undefined"==typeof _na||null===_na||!_na.getAPIs)return n("端描述表开关已关闭"),[];n("端描述表开关已打开， 端上会注入描述表， 但如果此时同时引入了兜底描述表， 则会被兜底描述表覆盖，目前矩阵（lite、tomas、青春版）产品属于该种情况");var r,t=[],a=[],o=[],i={},s=0;do{var u=e.invokeAPI(zn,[s]);if(!u){var f={name:"NoNaDescription",api:"na.getAPIs",message:"_na.getAPIs("+s+") return "+u};
f=c(f),Mn.push({name:"error:no-na-desc",error:f});break}var l=u.totalSlices,d=u.descriptions,p=u.defaults;i=p,r=l,s++,t=t.concat(d)}while(r>s);if(t=g(t,i),Gn=0!==t.length,_na&&_na.getAmendAPIs){var h=_na.getAmendAPIs();if(h&&"string"==typeof h)try{o=JSON.parse(h)}catch(v){console.error(v)}else Array.isArray(h)&&(o=h);if(o&&o.length>0){var b={};o.forEach(function(e){b[e.name]=e});for(var y=t.length-1;y>=0;y--)b[t[y].name]&&t.splice(y,1)}}return a=t.concat(o),m(a),a}function v(e,n){var r=n.appType,t=n.adaptAppType,a=A(e,r);
if(a||a===!1)return{isAdapted:!1,startedVersion:a};var o=A(e,t);return o?{isAdapted:!0,startedVersion:o}:{isAdapted:!1,startedVersion:yn}}function b(e){var n={appType:Tn,adaptAppType:Rn,realAppVersion:Dn,appVersion:Pn};return e.filter(function(e){return k(e,n)})}function y(e){var n=On?e.ios:e.android;return n&&n.length>0?b(n):[]}function w(e){var n=On?e.iosCompatibility:e.androidCompatibility;return b(n||[])}function A(e,n){return e&&e[n]&&e[n][Ln]}function k(e,n){void 0===n&&(n={appType:Tn,adaptAppType:Rn,realAppVersion:Dn,appVersion:Pn});
var t=n.realAppVersion,a=n.appVersion,o=v(e.env,n),i=o.isAdapted,s=o.startedVersion;if(!s)return!1;var c=i?a:t;return c?r(c,s)>=0:!1}function O(e){return e.invoke=Yn[e.invoke]||e.invoke,e.path=e.path||"",e}function S(e){var n=y(e),r=w(e),t=n.concat(r);return t.forEach(O),t}function x(e){var n=h(e);return n.forEach(O),n}function C(){return{status:0,message:"success: NA 无返回信息，默认成功"}}function N(e){var n={};for(var r in e)e.hasOwnProperty(r)&&"errno"!==r&&"errmsg"!==r&&"status"!==r&&"message"!==r&&"result"!==r&&(n[r]=e[r]);
return n}function I(e,n){var r;try{r="string"==typeof e?JSON.parse(e):e}catch(t){r=e}switch(Object.keys(Xn).indexOf(n)>-1&&(r=Xn[n](r)),typeof r){case"undefined":return{status:1,message:"fail: na 返回值为 undefined"};case"boolean":return{status:r?0:1,message:r?"success":"fail"};case"number":return{status:r,message:0===+r?"success":"fail"};case"string":return{status:0,message:"success",data:r};case"object":if(null===r)return{status:1,message:"fail: NA 返回信息为 null"};var a=N(r);if(null!=r.errno){var o=parseInt(r.errno,10),i=1===o?0:0===o?1:o;
return{status:i,message:r.errmsg||1===o?"success":"fail",data:r.data||a}}return null!=r.status?{status:+r.status,message:r.message||(0===+r.status?"success":"fail"),data:r.data||a}:null!=r.result?{status:r.result,message:0===r.result?"success":"fail",data:r.data||a}:{status:0,message:"success",data:r}}return r}function _(e,n,r){var t=n.success,a=n.fail;return function(n){n=I(n,e),r||(0===+n.status?t&&t(n):a&&a(n))}}function J(e,n){var r=n.success,t=n.fail;return function(n){n=I(n,e),0===+n.status?r&&r(n):t&&t(n)
}}function j(){return er+Zn++}function B(e,n){if(n&&(e=e.bind(n)),rr.push(e),!gn)if(gn=function(){var e=rr.slice(0);rr=[],gn=null;for(var n=0,r=e.length;r>n;n++)e[n]()},"function"==typeof setImmediate)setImmediate(gn);else if("function"==typeof MessageChannel){var r=new MessageChannel,t=r.port2;r.port1.onmessage=gn,t.postMessage(1)}else tr?Promise.resolve().then(gn):setTimeout(gn,0)}function E(e){return"[object Array]"===Object.prototype.toString.call(e)}function U(e){return e}function T(e,n){for(var r=e&&e.length||0,t=0,a=r;a>t&&n(e[t],t)!==!1;t++);}function R(e,n){return e+n.authority+n.path
}function L(e,n){var r="";if(n.args&&n.args.length>0){var t=[];T(n.args,function(n,r){var a=e[r];null!=a&&t.push(n.name+"="+encodeURIComponent(a))}),r=t.length>=0?t.join("&"):""}return r}function D(e,n){if(e&&Array.isArray(n.argQueryList)){var r=JSON.parse(e);n.argQueryList.forEach(function(e){r[e]&&delete r[e]}),e=JSON.stringify(r)}var t=n.paramsName||"params";return e?t+"="+encodeURIComponent(e):""}function P(e){var n="";if(e.query){var r=[];for(var t in e.query)e.query.hasOwnProperty(t)&&r.push(t+"="+e.query[t]);
n=r.join("&")}return n}function F(e,n){var r=[];if(n.argQueryList){var t=e?JSON.parse(e):[];n.argQueryList.forEach(function(e){if(t[e]){var n="string"==typeof t[e]?t[e]:JSON.stringify(t[e]);r.push(e+"="+encodeURIComponent(n))}})}return r.join("&")}function M(e,n){if(n=V(n),null==e)return n.isRequired&&"*"!==n.type?1:0;var r=!1;switch(typeof n.type){case"string":switch(n.type){case"string":case"boolean":case"number":case"function":case"object":r=typeof e===n.type;break;case"Object":r="object"==typeof e;
break;case"Array":r=e instanceof Array;break;case"*":r=!0}if(!r)return 2;break;case"object":if(e&&"object"==typeof e){r=!0;for(var t in n.type)if(r=!M(e[t],n.type[t]),!r)break}if(!r)return 2;break;default:if(n.oneOf){if(T(n.oneOf,function(n){return r=n===e,!r}),!r)return 3}else if(n.oneOfType){if(T(n.oneOfType,function(n){return r=!M(e,n),!r}),!r)return 4}else if(n.arrayOf){if(!(e instanceof Array))return 2;if(r=!0,T(e,function(e){return r=!M(e,n.arrayOf)}),!r)return 5}}return 0}function V(e){if("string"==typeof e){var n={isRequired:!0};
return/=$/.test(e)&&(n.isRequired=!1,e=e.slice(0,e.length-1)),/\[\]$/.test(e)?n.arrayOf=e.slice(0,e.length-2):e.indexOf("|")>0?n.oneOfType=e.split("|"):n.type="eventFunction"===e?"function":e,n}return e}function q(e,n,r){n=n.concat([{name:"success",value:"function="},{name:"fail",value:"function="}]),T(n,function(n,t){var a="",o=V(n.value);switch(M(e[t],o)){case 1:a=" is required.";break;case 2:a=" type error. must be "+JSON.stringify(o.type||"Array");break;case 3:a=" type error, must be oneOf "+JSON.stringify(o.oneOf);
break;case 4:a=" type error, must be oneOfType "+JSON.stringify(o.oneOfType);break;case 5:a=" type error, must be arrayOf "+JSON.stringify(o.arrayOf)}if(a){var i=r&&r.options.errorTitle||"jsNative";throw new Error("["+i+" Argument Error]"+n.name+a)}})}function W(e,n){var r={};return T(n,function(n,t){var a=e[t];null!=a&&(r[n.name]=a)}),r}function H(e,r){var t=e.method.split("."),a=r||[];e.args&&0!==e.args.length||(a=a.slice(1));var o={obj:t[0],func:t.slice(1).join("."),args:Array.isArray(a)?a:[a]};
return n("window.prompt BdboxApp:"+JSON.stringify(o)),window.prompt("BdboxApp:"+JSON.stringify(o))}function Q(e,n,r){var t=Object.keys(r).map(function(e){return e+"="+encodeURIComponent(r[e])});return n.args&&n.args.length>0&&T(n.args,function(n,r){var a=e[r];null!=a&&t.push(n.name+"="+encodeURIComponent(a))}),t.length>=0?t.join("&"):""}function $(){return ur+cr++}function K(e){var n=$();return hn[n]=function(n,r){e(n,r)},n}function z(e,n){return Sn?n.jscallback?e.page===n.page&&e.action===n.action&&e.fn===n.jscallback:e.page===n.page&&e.action===n.action:n.jscallback?e.action===n.action&&e.fn===n.jscallback:e.action===n.action
}function Y(e){return!fr.some(function(n){return e===n.fn})}function G(e,n){if("event.on"===e){var r=n.jscallback;if("string"==typeof r)return n;for(var t,a,o=!0,i=!0,s=fr.length;s--;){if(a=fr[s],z(a,n)){t=a.fnString,i=!1,o=!1;break}if(a.fn===n.jscallback){t=a.fnString,i=!1,o=!0;break}}i&&(t=K(n.jscallback)),o&&fr.push({page:n.page,action:n.action,fn:n.jscallback,fnString:t});var c={page:n.page,action:n.action,jscallback:t,rnmsg:n.rnmsg,allowDuplicate:n.allowDuplicate};return n.success&&(c.success=n.success),n.fail&&(c.fail=n.fail),c
}if("event.off"===e){var u=n.jscallback;if(!u||"string"==typeof u)return n;for(var f=!1,l=fr.length;l--;){var d=fr[l];if(z(d,n)){fr.splice(l,1),Y(d.fn)&&delete hn[d.fnString];var p={page:n.page,action:n.action,rnmsg:n.rnmsg,jscallback:d.fnString};return n.success&&(p.success=n.success),n.fail&&(p.fail=n.fail),f=!0,p}}if(!f)return console.error("error：尝试移除一个未被注册的事件函数"),B(function(){n.fail&&n.fail({status:1,message:"removes a function that has not be registered"})}),delete n.jscallback,n}return n}function X(e,n){return Object.keys(pr).indexOf(n)>-1?pr[n](e,n):e
}function Z(e,n){var r=[],t=n.concat([{name:"success",value:"function="},{name:"fail",value:"function="}]);return e&&t.length>0&&(r=t.map(function(n){return e[n.name]})),r}function en(e,n,r,t,a,o){function i(e,r){if(r.api=n,!r.stack){var t=new Error(r.message||"[Invoke Error]");r.stack=t.stack}return c(r),r.needDelayEmit?void(r.delayEmitCallback=function(){delete r.needDelayEmit,delete r.delayEmitCallback,a.emit(e,r)}):void a.emit(e,r)}try{a.emit("invoke:start",c({api:n,args:r}));var s=X(r,n),u=Z(s,t);
qn.on("error:*",i),e.invoke(n,u),qn.off("error:*",i)}catch(f){qn.off("error:*",i);var l=f,d="unknown",p=f.message||"";if(/^\[.+? Argument Error\]/.test(p)){d="arg-invalid";var g=p.split("]")[1].split(" ")[0];l={name:"ArgInvalidError",message:p,stack:f.stack,arg:g}}try{l.api=n}catch(m){}if(c(l),a.emit("error:"+d,l),o)throw f}}function nn(e,n,r,t,a){if(r.indexOf(".")>0){for(var o=r.split("."),i=e,s=0,c=o.length-1;c>s;s++){var u=o[s];i[u]=i[u]||{},i=i[u]}i[o[s]]=mr(n,t,a)}else e[r]=mr(n,t,a)}function rn(e){return function(n,r){return 2!==arguments.length||r?e.apiIndex[n]>-1:!1
}}function tn(e,n){if(n.indexOf(".")>0){for(var r=n.split("."),t=e,a=0,o=r.length-1;o>a;a++){var i=r[a];t[i]=t[i]||{},t=t[i]}return{methodOwner:t,methodName:r[a]}}return{methodOwner:e,methodName:n}}function an(e){for(var n in vr)if(vr.hasOwnProperty(n))if(!e.canIUse(n)&&e.canIUse(vr[n])){var r=tn(e,n),t=tn(e,vr[n]);r.methodOwner[r.methodName]=t.methodOwner[t.methodName],delete t.methodOwner[t.methodName]}else if(e.canIUse(n)&&e.canIUse(vr[n])){var a=tn(e,vr[n]);delete a.methodOwner[a.methodName]}}function on(e,n){if(k(n)){if(O(n),!n.invoke)throw Error("[boxx] "+n.name+": must specify right invoke type in description");
e.add(n)}}function sn(e){if(e&&Object.keys(e).length>0)for(var n=S(e),r=0;r<n.length;r++)on(Kn,n[r]);hr(this,Kn,Vn),an(this)}function cn(){return Wn.forEach(O),Wn}function un(e){!e&&Kn.apis.length>0||fn()}function fn(){var e=Jn?cn():x(Kn);Kn.add(e)}function ln(){var n={};return n.env=Fn,n.canIUse=rn(Kn),n.call=gr(Kn,Vn),n.setDefaultDescription=sn.bind(n),n.on=Vn.on,n.off=Vn.off,n.once=Vn.once,n.triggerCachedEvent=d,n.hasNADescription=Gn,n.setDebug=e,n.refreshNaDescriptions=un,n}function dn(e){var n={};
try{n=document&&document.querySelectorAll("[data-for=boxx-description]")&&document.querySelectorAll("[data-for=boxx-description]")[0]&&document.querySelectorAll("[data-for=boxx-description]")[0].innerHTML&&JSON.parse(document.querySelectorAll("[data-for=boxx-description]")[0].innerHTML)||{},u(Object.keys(n).length>0?!0:!1)}catch(r){n={},console.error(r)}e.setDefaultDescription(n)}function pn(e){void 0===e&&(e=Kn),sr(e),fn();var n=ln();return dn(n),n}var gn,mn={lite:{"5.24.0.0":{android:"13.2.0.0",ios:"13.2.1.0"},"5.21.0.0":{android:"12.28.0.0",ios:"12.28.2.0"},"5.15.0.0":{android:"12.21.0.0",ios:"12.21.0.0"},"5.6.0.0":{android:"12.13.0.0",ios:"12.13.0.0"},"5.0.0.0":{android:"12.1.0.0",ios:"12.1.0.0"},"4.21.0.0":{android:"11.24.0.0",ios:"11.24.0.0"},"4.17.0.0":{android:"11.22.0.0",ios:"11.22.0.0"}},tomas:{"1.13.0.0":{android:"12.19.0.0",ios:"12.19.0.0"},"1.0.0.0":{android:"12.1.0.0",ios:"12.1.0.0"}},baiduboxvision:{"2.0.0.0":{android:"12.15.0.0",ios:"12.15.0.0"},"1.0.0.0":{android:"11.25.9.10",ios:"11.25.5.15"}},baiduboxsenior:{"1.0.0.0":{android:"12.1.0.0",ios:"12.1.0.0"}},knews:{"2.0.0.0":{android:"12.13.0.0",ios:"12.13.0.0"}}},hn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof hn?hn:"undefined"!=typeof self?self:{},vn=null,bn=[],yn="99999",wn="undefined"!=typeof window,An=wn&&window.navigator.userAgent.toLowerCase(),kn=s(An),On=kn.isIOS,Sn=kn.isAndroid,xn=kn.OS,Cn=kn.OSVersion,Nn=kn.isBoxSeries,In=kn.isBdApp,_n=kn.isSupportSwanInBrowser,Jn=kn.isUseBrowserDesc,jn=kn.appProtoName,Bn=kn.isMainBox,En=kn.isLiteBox,Un=kn.isMissionBox,Tn=kn.boxType,Rn=kn.adaptBoxType,Ln=kn.boxBrowserType,Dn=kn.realBoxVersion,Pn=kn.boxVersion,Fn=Object.freeze({__proto__:null,INFINITYVERSION:yn,versionCompare:r,inBrowser:wn,UA:An,getUAInfo:s,isIOS:On,isAndroid:Sn,OS:xn,OSVersion:Cn,isBoxSeries:Nn,isBdApp:In,isSupportSwanInBrowser:_n,isUseBrowserDesc:Jn,appProtoName:jn,isMainBox:Bn,isLiteBox:En,isMissionBox:Un,boxType:Tn,adaptBoxType:Rn,boxBrowserType:Ln,realBoxVersion:Dn,boxVersion:Pn,addEnvInfo:c,isHitLocDesc:u}),Mn=[],Vn=new f,qn=new f,Wn=[{name:"swan.open",invoke:"iframe.openSwan",args:[{name:"appKey",value:"string"},{name:"path",value:"string="},{name:"query",value:"Object="},{name:"_baiduboxapp",value:{type:{from:"string=",notinhis:"string=",srcAppId:"string=",extraData:"Object=",ext:"Object=",srcAppPage:"string=",ubc:"Object=",navi:"string=",backwardURL:"string="}}},{name:"third_ext",value:"string="},{name:"abtest",value:"string="},{name:"oauthType",value:"string="},{name:"_swaninfo",value:"string="},{name:"downloadUrl",value:"string="},{name:"udid",value:"string="},{name:"host",value:"string="},{name:"cb",value:"string="},{name:"port",value:"string="}],authority:"swan",scheme:window&&window._na&&window._na.getSchemeHeader&&window._na.getSchemeHeader()}],Hn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Qn=p(function(e,n){!function(e){function r(e,n){for(var r=e&&e.length||0,t=0,a=r;a>t&&n(e[t],t)!==!1;t++);}function t(e){return e
}function a(e){return"string"==typeof e?JSON.parse(e):e}function o(e,n,t){r(n,function(n,r){var a,o=i(n.value);switch(s(e[r],o)){case 1:a=" is required.";break;case 2:a=" type error. must be "+JSON.stringify(o.type||"Array");break;case 3:a=" type error, must be oneOf "+JSON.stringify(o.oneOf);break;case 4:a=" type error, must be oneOfType "+JSON.stringify(o.oneOfType);break;case 5:a=" type error, must be arrayOf "+JSON.stringify(o.arrayOf)}if(a){var c=t&&t.options.errorTitle||"jsNative";throw new Error("["+c+" Argument Error]"+n.name+a)
}})}function i(e){if("string"==typeof e){var n={isRequired:!0};return/=$/.test(e)&&(n.isRequired=!1,e=e.slice(0,e.length-1)),/\[\]$/.test(e)?n.arrayOf=e.slice(0,e.length-2):e.indexOf("|")>0?n.oneOfType=e.split("|"):n.type=e,n}return e}function s(e,n){if(n=i(n),null==e)return n.isRequired&&"*"!==n.type?1:0;var t=!1;switch(typeof n.type){case"string":switch(n.type){case"string":case"boolean":case"number":case"function":case"object":t=typeof e===n.type;break;case"Object":t="object"==typeof e;break;case"Array":t=e instanceof Array;
break;case"*":t=!0}if(!t)return 2;break;case"object":if(e&&"object"==typeof e){t=!0;for(var a in n.type)if(t=!s(e[a],n.type[a]),!t)break}if(!t)return 2;break;default:if(n.oneOf){if(r(n.oneOf,function(n){return t=n===e,!t}),!t)return 3}else if(n.oneOfType){if(r(n.oneOfType,function(n){return t=!s(e,n),!t}),!t)return 4}else if(n.arrayOf){if(!(e instanceof Array))return 2;if(t=!0,r(e,function(e){return t=!s(e,n.arrayOf)}),!t)return 5}}return 0}function c(e){return r(e,function(n,r){"function"==typeof n&&(e[r]=u(n))
}),e}function u(e){return function(n){e("string"==typeof n?JSON.parse(n):n)}}function f(e){return r(e,function(n,r){"function"==typeof n&&(e[r]=l(n))}),e}function l(n){var r=O+k++;return e[r]=function(t){delete e[r],n(t)},r}function d(e){return r(e,function(n,r){e[r]=JSON.stringify(n)}),e}function p(e,n){var t={};return r(n,function(n,r){var a=e[r];null!=a&&(t[n.name]=a)}),t}function g(n){return e.prompt(n)}function m(n){e.location.href=n}function h(e){var n=document.createElement("iframe");n.src=e,document.body.appendChild(n),document.body.removeChild(n)
}function v(e,n){return"function"==typeof e?e(n):e[n]}function b(e,n){for(var r in n)n.hasOwnProperty(r)&&!N[r]&&(e[r]=n[r]);return e}function y(e,n){var r=[];if(e.args instanceof Array)for(var t=0;t<e.args.length;t++){var a=e.args[t];r.push({name:a.name||a.n,value:a.value||a.v})}return(n=n||b)({name:e.name,args:r,invoke:w(e.invoke),method:e.method,scheme:e.scheme||e.schema,authority:e.authority,path:e.path,handler:e.handler},e)}function w(e){if(e instanceof Array)return e;switch(typeof e){case"string":return S[e];
case"object":var n=[];return e.check&&n.push("ArgCheck"),e.before&&(n=n.concat(C[e.before])),n.push(x[e.call]),"JSON"===e.after&&n.push("ReturnDecode:JSON"),n}}function A(n){function i(e){var n=[];if(!e.invoke)throw new Error("["+b.options.errorTitle+"] invoke undefined: "+e.name);return r(e.invoke,function(r){var t,a=r.indexOf(":");a>0&&(t=r.slice(a+1),r=r.slice(0,a));var o=l[r](e,t,b);"function"==typeof o&&n.push(o)}),n}function s(e,n){return e?(n=n||[],r(i(e),function(e){n=e(n)}),n):void 0}function u(e){function n(e){return r(t,function(n){e=n(e)
}),e}var t=i(e);return function(){return n(Array.prototype.slice.call(arguments,0,e.args.length))}}var l={ArgCheck:function(e,n,r){return function(n){return o(n,e.args,r),n}},ArgFuncArgDecode:function(e,n){return"JSON"===n?c:t},ArgFuncEncode:function(){return f},ArgEncode:function(e,n){return"JSON"===n?d:t},ArgAdd:function(e,n){var r=e.args.length;e.args.push({name:"_"+n,value:"*"});var t=e[n];return function(e){return e[r]=t,e}},ArgCombine:function(e,n){switch(n){case"URL":var a=e.scheme+"://"+e.authority+e.path;
return function(n){var t=[];r(e.args,function(e,r){var a=n[r];null!=a&&t.push(e.name+"="+encodeURIComponent(a))});var o=t.join("&");return o?a+"?"+o:a};case"Object":return function(n){return p(n,e.args)};case"JSONString":return function(n){return JSON.stringify(p(n,e.args))}}return t},CallMethod:function(n){function r(){if(!t){var r=n.method.split("."),o=r.length-1;a=r[o],t=e;for(var i=0;o>i;i++)t=t[r[i]]}}var t,a;return function(e){switch(r(),n.args.length){case 0:return t[a]();case 1:return t[a](e[0]);
case 2:return t[a](e[0],e[1]);case 3:return t[a](e[0],e[1],e[2])}return t[a].apply(t,e)}},CallPrompt:function(){return g},CallIframe:function(){return h},CallLocation:function(){return m},CallMessage:function(n){return function(r){e.webkit.messageHandlers[n.handler].postMessage(r)}},ReturnDecode:function(e,n){return"JSON"===n?a:t}},b={options:{errorTitle:"jsNative",namingConflict:"error"},apis:[],apisLen:0,apiIndex:{},config:function(e){return e=e||{},this.options.errorTitle=e.errorTitle||this.options.errorTitle,this.options.namingConflict=e.namingConflict||this.options.namingConflict,this
},add:function(e){if(e instanceof Array)for(var n=0;n<e.length;n++)this.add(e[n]);else if("object"==typeof e){var r=e.name;if(null!=this.apiIndex[r])switch(this.options.namingConflict){case"override":this.apis[this.apiIndex[r]]=y(e,this.descriptionPropMerger);case"ignore":break;case"error":default:throw new Error("["+this.options.errorTitle+"] API exists: "+r)}else{var t=y(e,this.descriptionPropMerger);this.apiIndex[r]=this.apisLen,this.apis[this.apisLen++]=t}}return this},fromNative:function(e){return this.add(s(y(e,this.descriptionPropMerger)))
},invoke:function(e,n){return s(this.apis[this.apiIndex[e]],n)},map:function(e){e=e||function(e){return e};for(var n={},r=0;r<this.apis.length;r++){var t=this.apis[r],a=v(e,t.name);if(a&&t.invoke)if(a.indexOf(".")>0){for(var o=a.split("."),i=0,s=n;i<o.length-1;i++){var c=o[i];s[c]=s[c]||{},s=s[c]}s[o[i]]=u(t)}else n[a]=u(t)}return n},invokeAPI:function(e,n){return s(y(e,this.descriptionPropMerger),n)},addProcessorCreator:function(e,n){if(l[e])throw new Error("["+this.options.errorTitle+"] processorCreators exists: "+e);
return l[e]=n,this},setExternalDescriptionProps:function(e){for(var n="",r=0;r<e.length;r++){var t=e[r];n+='target["'+t+'"] = source["'+t+'"];'}this.descriptionPropMerger=new Function("target","source",n+"return target;")}};return b.config(n),b}var k=1,O="__jsna_",S={method:["ArgCheck","CallMethod"],"method.json":["ArgCheck","ArgFuncArgDecode:JSON","ArgFuncEncode","ArgEncode:JSON","CallMethod","ReturnDecode:JSON"],"prompt.json":["ArgCheck","ArgFuncArgDecode:JSON","ArgFuncEncode","ArgAdd:name","ArgCombine:JSONString","CallPrompt","ReturnDecode:JSON"],"prompt.url":["ArgCheck","ArgFuncArgDecode:JSON","ArgFuncEncode","ArgEncode:JSON","ArgCombine:URL","CallPrompt","ReturnDecode:JSON"],location:["ArgCheck","ArgFuncArgDecode:JSON","ArgFuncEncode","ArgEncode:JSON","ArgCombine:URL","CallLocation"],iframe:["ArgCheck","ArgFuncArgDecode:JSON","ArgFuncEncode","ArgEncode:JSON","ArgCombine:URL","CallIframe"],message:["ArgCheck","ArgFuncArgDecode:JSON","ArgFuncEncode","ArgAdd:name","ArgCombine:Object","CallMessage"]},x={method:"CallMethod",prompt:"CallPrompt",location:"CallLocation",iframe:"CallIframe",message:"CallMessage"},C={JSONStringInTurn:["ArgFuncArgDecode:JSON","ArgFuncEncode","ArgEncode:JSON"],JSONString:["ArgFuncArgDecode:JSON","ArgFuncEncode","ArgAdd:name","ArgCombine:JSONString"],JSONObject:["ArgFuncArgDecode:JSON","ArgFuncEncode","ArgAdd:name","ArgCombine:Object"],URL:["ArgFuncArgDecode:JSON","ArgFuncEncode","ArgEncode:JSON","ArgCombine:URL"]},N={name:1,args:1,invoke:1,method:1,scheme:1,authority:1,path:1,handler:1},I=new A;
I.version="1.2.4",I.createContainer=function(e){return new A(e)},e.jsNative=I,n.jsNative=I}("undefined"!=typeof window?window:"undefined"!=typeof Hn?Hn:Hn)}),$n=Qn.jsNative,Kn=$n.createContainer().config({errorTitle:"boxx",namingConflict:"override"}),zn={invoke:["ArgFuncArgDecode:JSON","ArgFuncEncode","CallMethod","ReturnDecode:JSON"],name:"na.getAPIs",method:"_na.getAPIs",args:[{name:"fragmentIndex",value:"number="}]},Yn={"iframe.bdboxURL":["ArgCheckWithCallback","RegisterCallbacks","ArgFuncArgDecode:JSON","ArgFuncEncode","ArgCombineWithCallback:Object","ArgJSONString","ArgCombineWithCallback:bdboxURL","CheckURL","CallIframe"],"iframe.url":["ArgCheckWithCallback","RegisterCallbacks","ArgFuncArgDecode:JSON","ArgFuncEncode","ArgsEncodeToJSONExceptString","ArgCombineWithCallback:URL","CheckURL","CallIframe"],"method.args-json+callback":["ArgCheckWithCallback","RegisterCallbacks","ArgCombineWithCallback:JSONString","CallMethodByUserArgs:callback"],"method.args-json":["ArgCheckWithCallback","RegisterCallbacks","ArgCombineWithCallback:JSONString","CallMethodByUserArgs:noCallback"],"method.bdboxURL":["ArgCheckWithCallback","RegisterCallbacks","ArgFuncArgDecode:JSON","ArgFuncEncode","ArgCombineWithCallback:Object","ArgJSONString","ArgCombineWithCallback:bdboxURL","CheckURL","CallMethodByUserArgs:callback"],"method.url":["ArgCheckWithCallback","RegisterCallbacks","ArgFuncArgDecode:JSON","ArgFuncEncode","ArgsEncodeToJSONExceptString","ArgCombineWithCallback:URL","CheckURL","CallMethodByUserArgs:callback"],"method.openSwan":["ArgCheckWithCallback","RegisterCallbacks","ArgsEncodeToJSONExceptString","SwanSchemeCombine","CheckURL","CallMethodByUserArgs:callback"],"iframe.openSwan":["ArgCheckWithCallback","RegisterCallbacks","ArgsEncodeToJSONExceptString","SwanSchemeCombine","CheckURL","CallIframe"]},Gn=!1,Xn={"feed.updateFavorInfo":C,"hybrid.reliabilityLog":C,"feed.showDislike":C,"easyBrowser.open":C,"account.login":function(e){return e.data?{status:"1"===e.data.status?0:1,message:"1"===e.data.status?"login success":"login fail"}:e
},"device.getCUID":function(e){if(e&&0===e.result)return{status:0,message:"success",data:{unique_id:e.unique_id}};if(e&&0===e.error)return{status:0,message:"success",data:{unique_id:e.result}};if(Sn&&(r(Pn,"7.4")>=0||!Bn)){var n=e&&e.length>0;return{status:n?0:1,message:n?"success":"fail",data:n?{unique_id:e}:{}}}if(Sn&&r(Pn,"7.4")<0||On&&r(Pn,"8.4")<0){var t=Sn?document.cookie.match(/BAIDUCUID=(.+?);/):An.match(/baiduboxapp\/.*\/(\w+)\/\d/),a=t?t[1]:"";return{status:a?0:1,message:a?"success":"fail",data:a?{unique_id:a}:{}}
}return e},"device.getDeviceInfo":function(e){return e.data.networkType=e.data&&e.data.netInfo&&e.data.netInfo.network&&("1_0"===e.data.netInfo.network||"Wifi"===e.data.netInfo.network)?"wifi":"unknown",e},"feed.getSessionClickID":function(e){return{status:+e.status,message:e.message||"",data:e.data&&e.data.params||e.params||{}}},"easyBrowser.performanceFlowLog":function(e){return Sn?{status:+e.status,message:e.message||""}:e},"easyBrowser.request":function(e){var n;return n=e&&e.data&&"1"===e.errno?JSON.parse(On?decodeURIComponent(e.data):e.data):e.data,{status:"1"===e.errno?0:"0"===e.errno?1:parseInt(e.errno,10),message:e.message||("1"===e.errno?"success":"fail"),data:n||{}}
},"easyBrowser.webStorage":function(e){return On&&0===e.result?{status:0,message:e.message||e.errmsg,data:e.data}:e},"device.getCurrentLocation":function(e){if(On)return{status:e.result||e.status,message:e.message||(0===e.result?"success":"fail"),data:e.coords||e.data};if(Sn){var n=e.st,r=e;return delete r.st,{status:n,message:e.message||(0===n?"success":"fail"),data:r}}return e},"feed.isWebPSupported":function(e){return Sn&&(e.data=e.result),e}},Zn=1,er="__boxx_",nr=function(e,n){hn[e]=n},rr=[],tr="function"==typeof Promise&&/native code/.test(Promise),ar=!1,or=15360,ir={ArgCheckWithCallback:function(e,n,r){return function(n){return q(n,e.args,r),n
}},ArgsEncodeToJSONExceptString:function(){return function(e){return T(e,function(n,r){"object"==typeof n&&(e[r]=JSON.stringify(n))}),e}},RegisterCallbacks:function(e){var n=e.name;return function(r){var t=r.pop(),a=r.pop();if(e.nextCallback){var o=J(n,{success:a,fail:t}),i=j();nr(i,o),r.push(i)}var s=j(),c=_(e.name,{success:a,fail:t},!!e.nextCallback);return nr(s,c),r.push(s),r}},ArgCombineWithCallback:function(e,n){var r=jn+"://";switch(n){case"bdboxURL":return function(n){var t=n[0],a=n[1],o=R(r,e),i=P(e),s=F(t,e),c=D(t,e),u=(e.callbackName||e.callback||"callback")+"="+a,f=[c,i,s,u].filter(function(e){return""!==e
}).join("&"),l=o+"?"+f;return console.log("scheme URL::: ",l),l};case"URL":return function(n){var t=R(r,e),a=P(e),o=F(n,e),i=e.callbackName||e.callback||"callback",s=i+"="+n.pop(),c=e.nextCallback?e.nextCallback+"="+n.pop():"",u=L(n,e),f=[u,c,a,o,s].filter(function(e){return""!==e}).join("&"),l=t+"?"+f;return console.log("scheme URL::: ",l),l};case"Object":return function(n){var r=e.args,t=n.pop();return e.nextCallback&&(r=r.concat([{name:e.nextCallback,value:"string"}])),0===r.length?[void 0,t]:[W(n,r),t]
};case"JSONString":return function(n){var r=n.pop(),t=e.args;return e.nextCallback&&(t=t.concat([{name:e.nextCallback,value:"string"}])),0===t.length?[void 0,r]:[JSON.stringify(W(n,t)),r]}}return U},ArgJSONString:function(){return function(e){var n=e[0],r=e[1];return[JSON.stringify(n),r]}},CallMethodByUserArgs:function(e,r){function t(){if(!i){var n=e.method.split("."),r=n.length-1;s=n[r],i=hn;for(var t=0;r>t;t++)i=i[n[t]]}}function a(){if(!ar){ar=!0;var n=[0,0,0,0];window.Bdbox_android_common?window.Bdbox_android_common.setQuery||(n[0]=2):n[0]=1,window.Bdbox_android_jsbridge?window.Bdbox_android_jsbridge.dispatch||(n[1]=2):n[1]=1,window._na?window._na.getAPIs?window._na.getAPIs(0)||(n[2]=3):n[2]=2:n[2]=1,window.chrome&&(n[3]=1);
var r="";try{r=localStorage.getItem("methodInfo")||"";var t=r?r.split("|"):[],a=n.join(",");-1===t.indexOf(a)&&(t.push(a),r=t.join("|"),localStorage.setItem("methodInfo",r))}catch(o){}var i={name:"MethodUndefined",message:"Method undefined",method:e.method,info:n,ls:r};qn.emit("error:method-undefined",i)}}function o(r){t();var o=i&&i[s];if(Sn&&Bn&&!o)return H(e,r);if(!o)return a(),"";if(!E(r))return n(e.method+"("+JSON.stringify(r)+")"),i[s](r);switch(void 0===r[0]&&r.shift(),n(e.method+"("+JSON.stringify(r)+")"),r.length){case 0:return i[s]();
case 1:return i[s](r[0]);case 2:return i[s](r[0],r[1]);case 3:return i[s](r[0],r[1],r[2]);default:return i[s].apply(i,r)}}var i,s;switch(r){case"callback":return function(e){return o(e)};case"noCallback":return function(e){var n=e.pop(),r=o(e);B(function(){hn[n](r)})};default:return function(e){return o(e)}}},CheckURL:function(){return function(e){for(var r=[],t=arguments.length-1;t-->0;)r[t]=arguments[t+1];try{n("schema:",e);var a=e.length;a>or&&qn.emit("error:url-too-long",{name:"URLTooLong",message:"The url is too long",length:a,url:e});
var o=/(NaN|null|undefined)/.exec(e);o&&qn.emit("error:url-include-unexpected-keyword",{name:"URLError",message:"The url include an unexpected keyword",keyword:o[0],url:e})}catch(i){}return e}},SwanSchemeCombine:function(e){var r=jn+"://";return function(t){var a=t[0],o=t[1]||"";if(0!==o.indexOf("/")){n("xcx_path: "+o+" 必须是/开头");var i=a.substr(a.length-1,1);o="/"===i?o:"/"+o}var s=t[2]&&JSON.parse(t[2])||{};t[0]=void 0,t[1]=void 0,t[2]=void 0;var c=e.callbackName||e.callback||"callback",u=c+"="+t.pop(),f=e.nextCallback?e.nextCallback+"="+t.pop():"",l=r+e.authority+"/"+a+o,d=P(e),p=Q(t,e,s),g=[p,f,d,u].filter(function(e){return""!==e
}).join("&"),m=l+"?"+g;return console.log("scheme URL::: ",m),m}}},sr=function(e){for(var n in ir)if(ir.hasOwnProperty(n))try{e.addProcessorCreator(n,ir[n])}catch(r){}},cr=1,ur="__boxx_event_",fr=[],lr={},dr={fire:function(e,n){var r=lr[e],t=0;if(r){var a=[].slice.call(arguments,0);a=a.length>2?a.splice(2,a.length-1):[],a=[e,n].concat(a),t=r.length;for(var o=0;t>o;o++){var i=r[o];i&&i.callback&&(a=a.concat(i.args),i.callback.apply(i.scope,a))}}return this},on:function(e,n,r){e=e||[];var t=[].slice.call(arguments);
"string"==typeof e&&(e=e.split(","));var a=e.length;if(0===a)return this;t=t.length>3?t.splice(3,t.length-1):[];for(var o=0;a>o;o++){var i=e[o];lr[i]=lr[i]||[],lr[i].push({callback:n,scope:r,args:t})}return this},off:function(e,n,r){var t=lr[e];if(!t)return this;if(n){for(var a=t.length,o=[],i=0;a>i;i++){var s=t[i];(s.callback!==n||s.scope!==r)&&o.push(s)}lr[e]=o}else t.length=0;return this},removeAll:function(){return lr={},this}},pr={"search.setQuery":function(e,n){var r=Kn.apis[Kn.apiIndex[n]].authority;
return Sn&&"searchframe"===r?(e.history=Boolean(e.history),e={searchType:JSON.stringify(e)}):On&&(e.history=Number(e.history)),e},"account.openLoginDialog":function(e){return e.third_login=e.showThirdLogin,e.login_type=e.loginType,e},"app.feedback":function(e){return Sn&&(e.type=e.type||"2"),e},"easyBrowser.request":function(e){return e.header=e.header||{},e.data=e.data||{},Sn?(e.header=JSON.stringify(e.header),e.data=JSON.stringify(e.data),e):e},"commonUI.showToastOld":function(e){return e=e||{},e.string=e.message,e
},"easyBrowser.onPerformanceFlowEvent":function(e){return Sn&&(e.min_v="16789504"),e},"easyBrowser.openHybrid":function(e){return e=e||{},e.type="Hybrid",e.backup&&e.backup.url&&(e.backup.url=encodeURIComponent(e.backup.url)),e},"easyBrowser.openHybridOld":function(e){if(e=e||{},Sn){var n=e.backup&&e.backup.url||"",r=e.style&&e.style.toolbaricons&&e.style.toolbaricons.tids||"",t=["S.backup="+JSON.stringify({url:encodeURIComponent(n)}),"component=com.baidu.searchbox/.home.feed.FeedDetailActivity","S.toolbaricons="+encodeURIComponent(JSON.stringify({toolids:r})),"S.menumode="+(e.menumode||"")].join(";");
return{intent:"intent:#Intent;"+t+";end",min_v:e.min_v||"16783629",mode:"0"}}if(On){var a=e.style&&e.style.toolbaricons&&e.style.toolbaricons.tids||"";if(e.toolbar=JSON.stringify({toolids:a}),e.type="Hybrid",e.openurl=encodeURIComponent(e.url),e.isla=e.isla,e.minver="5.3.0.0",e.opentype=1,e.append=0,e.rbtnstyle=2,e.style&&"object"==typeof e.style){var o=e.style;for(var i in o)o.hasOwnProperty(i)&&(e[i]=o[i]);delete e.style}return e}return e},"device.getDeviceInfo":function(e){return e.keys=e.keys||["netInfo","screenInfo"],e
},"event.on":function(e){return e=G("event.on",e),"globalSettingChange"===e.action&&(window._Box_||(window._Box_={}),window._Box_.event||(window._Box_.event={}),window._Box_.event.broadcast||(window._Box_.event.broadcast=dr),window._Box_.event.broadcast.on(e.action,e.jscallback?window[e.jscallback]:function(){})),e},"event.off":function(e){return"globalSettingChange"===e.action&&window._Box_&&delete window._Box_,e=G("event.off",e)}},gr=function(e,r){return function(t,a){n("搜索禁止使用 call 方法调用端能力，请先判断canIuse之后使用语义化 api 调用");
var o=e.apiIndex[t];if(void 0===o){var i="暂不支持 API: ["+t+"]",s=new Error(i);return void r.emit("error:api-missed",c({name:"APIMissedError",api:t,message:i,stack:s.stack}))}var u=e.apis[o];en(e,t,a,u.args,r,!1)}},mr=function(e,n,r){return function(t){en(e,n.name,t,n.args,r,!0)}},hr=function(e,n,r){for(var t=n.apis,a=0,o=t.length;o>a;a++){var i=t[a],s=i.name;s&&i.invoke&&nn(e,n,i.name,i,r)}},vr={"account.login":"account.openLoginDialog","album.image.open":"album.image.openOld","commonUI.closeLoading":"commonUI.closeLoadingOld","commonUI.showToast":"commonUI.showToastOld","easyBrowser.openHybrid":"easyBrowser.openHybridOld","easyBrowser.performanceFlowLog":"easyBrowser.onPerformanceFlowEvent","device.getNetworkType":"device.getDeviceInfo"},br=pn();
return br}),define("@baidu/boxx",["@baidu/boxx/dist/boxx.umd"],function(e){return e});